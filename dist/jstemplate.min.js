/*!
 * Simple JavaScript template engine
 * https://github.com/JoniJnm/jstemplate
 *
 * Copyright JoniJnm.es
 * Released under the GPL-2.0 license.
 *
 * Date: 2015-11-11
 */
!function(t,n){"use strict";"function"==typeof define&&define.amd?define([],n):"undefined"!=typeof module&&module.exports?module.exports=n():t.jstemplate=n()}(this,function(){"use strict";var t=function(t){this.html=t,this.code="",this.startBlocks=["if","for","while","each"],this.continueBlocks=["else","else if","elseif"]};t.prototype={add:function(t){this.code+=t,this.code+="\n"},initCode:function(){this.add("with(data) {"),this.add('var html = "";')},endCode:function(){this.add("}"),this.add("return html;")},addRawHTML:function(t){this.add("html += "+JSON.stringify(t)+";")},addReturnedCode:function(t){this.add("html += "+t+";")},addEachBlock:function(t){var n=t.match(/^each ([\w\._]+) as ([\w_]+)$/),e=n[1],i=n[2];this.add("for (var __i in "+e+") {"),this.add("if (!"+e+".hasOwnProperty(__i)) continue;"),this.add("var "+i+" = "+e+"[__i];")},addStartBlock:function(t){t=t.replace(/ /," ("),t+=") {",this.add(t)},addContinueBlock:function(t){this.addEndBlock(),"else"===t?this.add("else {"):(t=t.replace(/^else if/,"elseif"),t=t.replace(/ /," ("),t=t.replace(/^elseif/,"else if"),t+=") {",this.add(t))},addEndBlock:function(){this.add("}")},run:function(){this.initCode();var t=0,n=this.html,e=this;n.replace(/{(.*?)\}/g,function(i,d,o){e.addRawHTML(n.substr(t,o-t)),e.isEachBlock(d)?e.addEachBlock(d):e.isStartBlock(d)?e.addStartBlock(d):e.isContinueBlock(d)?e.addContinueBlock(d):e.isEndBlock(d)?e.addEndBlock(d):e.addReturnedCode(d),t=o+i.length}),this.endCode()},isEachBlock:function(t){return 0===t.indexOf("each ")},isStartBlock:function(t){var n=new RegExp("^("+this.startBlocks.join("|")+")");return n.test(t)},isContinueBlock:function(t){var n=new RegExp("^("+this.continueBlocks.join("|")+")");return n.test(t)},isEndBlock:function(t){return"/"===t[0]},getCode:function(){return this.code}};var n=function(n){var e=new t(n);e.run();var i=e.getCode(),d=new Function("data",i);return function(t){return d.call(null,t)}};return n});