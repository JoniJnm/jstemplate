/*!
 * Simple JavaScript template engine
 * https://github.com/JoniJnm/jstemplate
 *
 * Copyright JoniJnm.es
 * Released under the GPL-2.0 license.
 *
 * Date: 2015-11-12
 */
!function(t,e){"use strict";"function"==typeof define&&define.amd?define([],e):"undefined"!=typeof module&&module.exports?module.exports=e():t.jstemplate=e()}(this,function(){"use strict";var t=function(t){this.html=t,this.code="",this.startBlocks=["if","for","while","foreach"],this.continueBlocks=["else","else if","elseif"],this.eachRegex=/^foreach ([\w\._]+) as ([\w_]+)$/};t.prototype={add:function(t){this.code+=t,this.code+="\n"},initCode:function(){this.add("with(data) {"),this.add('var html = "";')},endCode:function(){this.add("}"),this.add("return html;")},addRawHTML:function(t){this.add("html += "+JSON.stringify(t)+";")},addRawCode:function(t){this.add(t+";")},addReturnedCode:function(t){this.add("html += "+t.substr(1)+";")},addEachBlock:function(t){var e=t.match(this.eachRegex),n=e[1],i=e[2];this.add("var _i = -1;"),this.add("for (var _key in "+n+") {"),this.add("if (!"+n+".hasOwnProperty(_key)) continue;"),this.add("_i++;"),this.add("var "+i+" = "+n+"[_key];")},addStartBlock:function(t){t=t.replace(/ /," ("),t+=") {",this.add(t)},addContinueBlock:function(t){this.addEndBlock(),"else"===t?this.add("else {"):(t=t.replace(/^else if/,"elseif"),t=t.replace(/ /," ("),t=t.replace(/^elseif/,"else if"),t+=") {",this.add(t))},addEndBlock:function(){this.add("}")},run:function(){this.initCode();var t=0,e=this.html,n=this;e.replace(/{(.*?)\}/g,function(i,d,o){d=d.replace(/^[ ]+/,"").replace(/ +$/,""),n.addRawHTML(e.substr(t,o-t)),n.isEachBlock(d)?n.addEachBlock(d):n.isStartBlock(d)?n.addStartBlock(d):n.isContinueBlock(d)?n.addContinueBlock(d):n.isEndBlock(d)?n.addEndBlock(d):n.isReturnedCode(d)?n.addReturnedCode(d):n.isComment(d)||n.addRawCode(d),t=o+i.length}),this.endCode()},isEachBlock:function(t){return this.eachRegex.test(t)},isStartBlock:function(t){var e=new RegExp("^("+this.startBlocks.join("|")+")");return e.test(t)},isContinueBlock:function(t){var e=new RegExp("^("+this.continueBlocks.join("|")+")");return e.test(t)},isEndBlock:function(t){return"/"===t[0]},isReturnedCode:function(t){return"="===t[0]},isComment:function(t){return"*"===t[0]},getCode:function(){return this.code}};var e=function(e){var n=new t(e);n.run();var i,d=n.getCode();try{i=new Function("data",d)}catch(o){throw o.code=d,o}return function(t){try{return i.call(null,t)}catch(e){throw e.code=d,e}}};return e});